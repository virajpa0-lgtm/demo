<!doctype html>
<html lang="en" class="h-full">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>CompStat View (Demo)</title>

	<script src="https://cdn.tailwindcss.com"></script>
	<script>
		tailwind.config = {
			darkMode: 'class',
			theme: {
				extend: {
					colors: { surface:'#0c1220', panel:'#0f172a', mid:'#101826', accent:'#60a5fa', muted:'#93a4bc' },
					boxShadow: { 'inset-1':'inset 0 1px 0 rgba(255,255,255,0.02)', card:'0 1px 2px rgba(0,0,0,0.4), 0 8px 24px rgba(0,0,0,0.35)' },
				}
			}
		};
	</script>

	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

	<style>
		*{scrollbar-width:thin;scrollbar-color:#3b4963 transparent;}
		*::-webkit-scrollbar{height:8px;width:10px;}
		*::-webkit-scrollbar-thumb{background:#3b4963;border-radius:8px;}
		.leaflet-container{background:#0b1220;}
		input[type="date"]::-webkit-calendar-picker-indicator{filter:invert(1) opacity(.7);}

		.input-field-group{position:relative;}
		.input-field-group label{position:absolute;top:-8px;left:12px;padding:0 5px;background-color:#0c1220;}
		.asterisk{color:red;}
		.input-field-group select,.input-field-group input{padding-top:12px;}

		/* Resizable panes */
		.pane{min-width:0;transition:flex .25s ease;position:relative;}
		.split-btn{
			position:absolute;top:50%;transform:translateY(-50%);
			z-index:60;height:36px;width:36px;
			display:grid;place-items:center;border-radius:.5rem;
			background:#2563eb;color:#fff;border:1px solid rgba(255,255,255,.12);
			box-shadow:0 6px 18px rgba(0,0,0,.35);cursor:pointer;
		}
		.split-btn:hover{filter:brightness(1.1);}
		.split-btn-left{left:8px;}
		.split-btn-right{right:8px;}
	</style>
</head>
<body class="h-full bg-surface text-slate-200">
	<div class="min-h-full">
		<header class="px-6 lg:px-8 py-4 border-b border-slate-800/70 bg-gradient-to-b from-[#0b1425] to-surface">
			<div class="flex items-center gap-3 text-sm text-slate-400">
				<span class="opacity-80">Dashboard</span><span>›</span><span class="opacity-80">CompStat</span><span>›</span><span class="opacity-80">Compstat-report-v2</span>
			</div>
			<div class="mt-3 flex items-center gap-4">
				<h1 class="text-2xl font-semibold tracking-tight">CompStat View</h1>
				<div class="ml-auto flex items-center gap-3">
					<label class="relative inline-flex items-center">
						<input placeholder="Search" class="peer w-72 rounded-lg bg-mid text-sm text-slate-200 placeholder:text-slate-500 px-9 py-2 outline-none ring-1 ring-slate-700/70 focus:ring-accent/60 shadow-inset-1" />
						<svg class="absolute left-3 top-2.5 h-4 w-4 text-slate-400 peer-focus:text-accent" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.5 3a5.5 5.5 0 1 1 3.473 9.787l3.12 3.12a1 1 0 0 1-1.414 1.414l-3.12-3.12A5.5 5.5 0 0 1 8.5 3Zm-3.5 5.5a3.5 3.5 0 1 0 7 0a3.5 3.5 0 0 0-7 0Z" clip-rule="evenodd"/></svg>
					</label>
					<div class="flex items-center gap-2 rounded-full bg-mid px-3 py-1 ring-1 ring-slate-700/80">
						<div class="h-7 w-7 rounded-full bg-slate-600/40 grid place-items-center">JD</div>
						<div class="text-xs leading-tight">
							<div class="text-slate-200/90">Hi, John Doe</div>
							<div class="text-slate-400/80">Crime analyst</div>
						</div>
					</div>
				</div>
			</div>
		</header>

		<section class="px-6 lg:px-8 py-4 space-y-3">
			<!-- Omitted for brevity (unchanged inputs/filters) -->
		</section>

		<section class="px-6 lg:px-8">
			<!-- Omitted for brevity (tabs and controls) -->
		</section>

		<!-- Resizable content -->
		<main class="px-6 lg:px-8 py-4">
			<div id="splitContainer" class="flex gap-4">
				<section id="tablePane" class="pane flex-1 rounded-xl bg-panel ring-1 ring-slate-800/80 shadow-card">
					<button id="btnGrowTable" class="split-btn split-btn-right" title="Widen table">
						<svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor"><path d="M7 5a1 1 0 011.707-.707l5 5a1 1 0 010 1.414l-5 5A1 1 0 017 15.999V13H3a1 1 0 110-2h4V6a1 1 0 010-1z"/></svg>
					</button>
					<header class="flex items-center justify-between px-4 py-3 border-b border-slate-800/70">
						<h2 class="font-medium">Crime Analytics</h2>
					</header>
					<div class="overflow-auto">
						<table class="min-w-full text-sm">
							<thead class="bg-mid/50 text-slate-400">
								<tr class="text-left">
									<th class="px-4 py-2 font-medium">Category</th>
									<th class="px-4 py-2 font-medium">Week 2020 Sep 25</th>
									<th class="px-4 py-2 font-medium">YTD 2025</th>
									<th class="px-4 py-2 font-medium">YTD 2024</th>
									<th class="px-4 py-2 font-medium">Chg% ↑</th>
									<th class="px-4 py-2 font-medium">YTD 2023</th>
									<th class="px-4 py-2 font-medium">YTD 2022</th>
								</tr>
							</thead>
							<tbody id="crimeRows" class="divide-y divide-slate-800/70"></tbody>
						</table>
					</div>
				</section>

				<section id="mapsPane" class="pane flex-2">
					<button id="btnGrowMaps" class="split-btn split-btn-left" title="Widen maps">
						<svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor"><path d="M13 5a1 1 0 00-1.707-.707l-5 5a1 1 0 000 1.414l5 5A1 1 0 0013 16v-3h4a1 1 0 100-2h-4V6a1 1 0 000-1z"/></svg>
					</button>
					<div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
						<div class="rounded-xl bg-panel ring-1 ring-slate-800/80 shadow-card overflow-hidden">
							<div id="mapA" class="h-[420px] md:h-[500px]"></div>
						</div>
						<div class="rounded-xl bg-panel ring-1 ring-slate-800/80 shadow-card overflow-hidden">
							<div id="mapB" class="h-[420px] md:h-[500px]"></div>
						</div>
					</div>
				</section>
			</div>
		</main>

		<footer class="px-6 lg:px-8 py-4 text-xs text-slate-500/80">
			<div class="flex items-center justify-between"><div>© 2025 | All rights reserved</div><div class="italic">SoundThinking</div></div>
		</footer>
	</div>

	<script>
		// Table rows demo
		const demoRows=[{category:'Robbery',w:'—',y25:1675,y24:1877,chg:17,y23:1590,y22:1498}];
		const tbody=document.getElementById('crimeRows');
		for(const r of demoRows){
			const tr=document.createElement('tr');
			tr.innerHTML=`<td class="px-4 py-2">${r.category}</td><td>${r.w}</td>`;
			tbody.appendChild(tr);
		}

		// Split resize logic (FIXED)
		let splitMode='default';
		const tablePane=document.getElementById('tablePane');
		const mapsPane=document.getElementById('mapsPane');

		function applySplit(mode){
			splitMode = mode;
			if(mode==='default'){
				tablePane.style.flex = '1 1 0%';
				mapsPane.style.flex = '2 1 0%';
			}
			else if(mode==='tableWide'){
				tablePane.style.flex = '2 1 0%';
				mapsPane.style.flex = '1 1 0%';
			}
			else if(mode==='mapsWide'){
				tablePane.style.flex = '1 1 0%';
				mapsPane.style.flex = '3 1 0%';
			}
		}

		document.getElementById('btnGrowTable').addEventListener('click',()=>applySplit(splitMode==='tableWide'?'default':'tableWide'));
		document.getElementById('btnGrowMaps').addEventListener('click',()=>applySplit(splitMode==='mapsWide'?'default':'mapsWide'));

		applySplit('default');
	</script>
</body>
</html>
